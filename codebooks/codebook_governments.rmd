---
title: "Codebook bundeslaendeR Government Data"
author: "Robert Stelzle"
date: "15 1 2022"
output:
  pdf_document:
    keep_tex: true
header-includes:
- \usepackage{longtable}
- \usepackage{float}
- \usepackage{graphicx}
---
  
```{r include=FALSE}
library(tidyverse)
library(bundeslaendeR)
library(kableExtra)
library(patchwork)
knitr::opts_chunk$set(echo = FALSE)
knitr::opts_chunk$set(fig.align="center",
                      fig.width = 5)
```

```{r}
# Design des longtables low key von Werner Krause geklaut

item_start <- function(item_name_code, item_name, item_desc, desc_left = FALSE) {
  item_name_code <- str_replace_all(item_name_code, pattern = r"{_}", replacement = r"{\\_}")
  cat("\\begin{longtable}{p{3.2cm}| p{11cm}}")
  cat("\n")
  cat(paste0("\\texttt{", item_name_code, "} &"))
  cat(paste0("\\textbf{", item_name, "}"))
  cat("\\newline \n")
  
  if (desc_left == FALSE) {
    cat(item_desc)
  }
  if (desc_left == TRUE) {
    cat("\\begin{flushleft}")
    cat(item_desc)
    cat("\n")
    cat("\\end{flushleft}")
    cat("\n")
  }
  
}


item_image <- function(ggobj, filenameimg, width, height) {
  
  ggsave(ggobj, filename = filenameimg, width = width, height = height)
  
  cat("\\hspace*{.25cm}")
  cat("\n")
  cat("\\begin{minipage}[t]{\\linewidth }")
  cat("\n")
  cat("\\vspace{0pt}")
  cat("\n")
  cat("\\includegraphics[width = \\linewidth]{")
  cat(filenameimg)
  cat("}")
  cat("\n")
  cat("\\end{minipage}")
  
}


item_end <- function(add_desc = "") {
  cat(add_desc)
  cat("\n")
  cat("\\end{longtable}")
  
}



short_item <- function(item_name_code, item_name, item_desc, desc_left = FALSE) {
  
  item_name_code <- str_replace_all(item_name_code, pattern = r"{_}", replacement = r"{\\_}")
  cat("\\begin{longtable}{p{3.2cm}| p{11cm}}")
  cat("\n")
  cat(paste0("\\texttt{", item_name_code, "} &"))
  cat(paste0("\\textbf{", item_name, "}"))
  cat("\\newline \n")
  
  if (desc_left == FALSE) {
    cat(item_desc)
  }
  if (desc_left == TRUE) {
    cat("\\begin{flushleft}")
    cat(item_desc)
    cat("\n")
    cat("\\end{flushleft}")}
  cat("\n")
  cat("\\end{longtable}")
  
}


```



## `ltw_election_results_and_governments`


This codebook only concerns variables specific to the 
`ltw_election_results_and_governments` dataset. For further variables
plese refer to the `ltw_election_results` dataset's codebook.

`ltw_election_results_and_governments` returns a returns data frame (tibble if the tibble
package is loaded) containing both election results as well as linked information
on governments in the German states.
Each row contains information on one party during the time in office of one cabinet.


Election results data are provided by the Bundeswahlleiter.
A machine-readable version of the data in the pdf available here
(https://www.bundeswahlleiter.de/service/landtagswahlen.html) was kindly provided to me.
Election data outside the timeframe covered by Bundeswahlleiter's data provided to me
was collected from the states' local election authorities' (Landeswahlleiter) websites.
More information on parties and the continuity of parties under different labels was
collected by me.
Information on Governments mainly taken from the replication data of
Linhart, Eric, Franz U. Pappi und Ralf Schmitt (2008): Die proportionale
Ministerienaufteilung in deutschen Koalitionsregierungen: Akzeptierte Norm oder
das Ausnutzen strategischer Vorteile?, Politische Vierteljahresschrift 49(1): 46-67.
To be found online here:
https://www.tu-chemnitz.de/phil/politik/pspi/forschung/daten.php.
Information outside the timeframe of Linhart et al. as well as information on
the names and party affiliations of the MinisterprÃ¤sidenten
was collected by me, mainly from German Wikipedia.




```{r, results="asis"}
item_start(item_name_code = "gov_no_within_\nlegterm",
           item_name = "Number of cabinet within legislative term",
           item_desc = "Number of cabinet within legislative term (i.e. First cabinet in the 1990-1994 legislative term of state X).",
           desc_left = FALSE)
```



```{r, results="asis"}
govnolegperplot <- 
ltw_election_results_and_gov %>% 
  select(state, election_date, gov_id, gov_no_within_legterm) %>% 
  distinct() %>% 
  ggplot(aes(x = gov_no_within_legterm)) +
    geom_bar() +
    theme_minimal() +
    labs(y = "N")


item_image(ggobj = govnolegperplot,
           filenameimg = "cbgov/govnolegperplot.pdf",
           width = 5,
           height = 5/3)
```


```{r, results="asis"}
item_end()
```


```{r, results="asis"}
short_item(item_name_code = "gov_id",
           item_name = "Government ID",
           item_desc = "Unique ID of government. Taken from Linhart et al. However, this ID is not counting up within state by time. In cases where Governments were 
           missing from Linhart et al. before the timeframe covered by Linhart et al. (eg. in Berlin) these earlyer governments have an higher ID than later cabinets 
           contained in Linhart et al. data.",
           desc_left = FALSE)
```




```{r, results="asis"}
item_start(item_name_code = "state_gov_\nnumber",
           item_name = "Number of government in state.",
           item_desc = "Number of government in state.",
           desc_left = FALSE)
```



```{r, results="asis"}
stategovnumplot <-
ltw_election_results_and_gov %>% 
  select(state, election_date, gov_id, state_gov_number) %>% 
  distinct() %>% 
  ggplot(aes(x = state_gov_number)) +
    geom_bar() +
    theme_minimal() +
    labs(y = "N")


item_image(ggobj = stategovnumplot,
           filenameimg = "cbgov/stategovnumplot.pdf",
           width = 5,
           height = 5/3)
```


```{r, results="asis"}
item_end()
```


```{r, results="asis"}
short_item(item_name_code = "gov_party",
           item_name = "Government Party",
           item_desc = "Boolean wether the party was a cabinet party. Note: There is a single cabinet where no party is marked as part of the cabinet: Heinrich Welsch's caretaker government in the Saarland (at the time not yet a member of the FRG) in 1955.",
           desc_left = FALSE)
```





```{r, results="asis"}
item_start(item_name_code = "nmin_party",
           item_name = "Number of Ministers of Party",
           item_desc = "Number of Ministers of Party.",
           desc_left = FALSE)
```



```{r, results="asis"}
nminpartyplot <-
ltw_election_results_and_gov %>% 
  filter(gov_party == TRUE) %>% 
  select(state, election_date, gov_id, nmin_party) %>% 
  distinct() %>% 
  ggplot(aes(x = nmin_party)) +
    geom_bar() +
    theme_minimal() +
    labs(y = "N")


item_image(ggobj = nminpartyplot,
           filenameimg = "cbgov/nminpartyplot.pdf",
           width = 5,
           height = 5/3)
```


```{r, results="asis"}
item_end()
```




```{r, results="asis"}
short_item(item_name_code = "gov_source",
           item_name = "Government Source",
           item_desc = "Source of the information on the government. Either Linhart et al. or the URL of the German Wikipedia Page containing information on the cabinet.",
           desc_left = FALSE)
```



```{r, results="asis"}
short_item(item_name_code = "gov_remarks_\nstelzle",
           item_name = "Governments remarks Stelzle",
           item_desc = "My remarks on governments.",
           desc_left = FALSE)
```


```{r, results="asis"}
short_item(item_name_code = "minister_president",
           item_name = "Name of minister president",
           item_desc = "Name of minister president.",
           desc_left = FALSE)
```


```{r, results="asis"}
short_item(item_name_code = "mp_party",
           item_name = "Minister President's Party",
           item_desc = "Party of the minister president. partyname\\_short format used. Note: There is a single cabinet with an independent minister president: Heinrich Welsch's caretaker government in the Saarland (at the time not yet a member of the FRG) in 1955.",
           desc_left = FALSE)
```



```{r, results="asis"}
short_item(item_name_code = "is_mp_party",
           item_name = "Is MP Party?",
           item_desc = " the governments minister president from this party? Note: There is a single cabinet where the minister president is not part of any party: Heinrich Welsch's caretaker government in the Saarland (at the time not yet a member of the FRG) in 1955.",
           desc_left = FALSE)
```



























